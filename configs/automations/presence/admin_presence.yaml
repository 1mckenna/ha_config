# Admin is in the Basement using Google Home BT tracking
- alias: Admin in Basement
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.basement_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.basement_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Basement

# Admin is in the Garage using Google Home BT tracking
- alias: Admin in Garage
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.garage_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.garage_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Garage


# Admin is in the Bedroom using Google Home BT tracking
- alias: Admin in Bedroom
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.bedroom_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.bedroom_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Bedroom


# Admin is in the Office using Google Home BT tracking
- alias: Admin in Office
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.office_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.office_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Office

# Admin is in the Main Floor using Google Home BT tracking
- alias: Admin in Main Floor
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.mainfloor_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.mainfloor_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Main Floor

# Admin is in the Entryway using Google Home BT tracking
- alias: Admin in Entryway
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.entryway_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.entryway_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Entryway

# Admin is in the Guest Room using Google Home BT tracking
- alias: Admin in Guest Room
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.guestroom_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bathroom_admin_gh_rssi.state ) > ( states.sensor.guestroom_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Guest Room

# Admin is in the Bathroom using Google Home BT tracking
- alias: Admin in Bathroom
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: sensor.bathroom_admin_gh_rssi
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
    - condition: template
      value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"     
  action:
    - delay: '00:00:05'
    - condition: and
      conditions:
      - condition: template
        value_template: "{{ ( states.sensor.basement_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.garage_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.bedroom_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.office_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.mainfloor_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.entryway_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"
      - condition: template
        value_template: "{{ ( states.sensor.guestroom_admin_gh_rssi.state ) > ( states.sensor.bathroom_admin_gh_rssi.state )  }}"  
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.admin_bathroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Bathroom

# Admin is away from the house
- alias: 'Admin is Away'
  initial_state: 'on'
  trigger:
    platform: state
    entity_id:  device_tracker.d463c65d0c74
    to: 'not_home'
  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Away
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_basement_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_garage_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bedroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_office_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_mainfloor_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_entryway_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_guestroom_presence
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.admin_bathroom_presence

# Admin is now home and BT is unknown
- alias: 'Admin is Home'
  initial_state: 'on'
  trigger:
    platform: state
    entity_id:  device_tracker.d463c65d0c74
    to: 'home'
  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.admin_room_location
        option: Home
